!function(){"use strict";var e="undefined"!=typeof document?document.currentScript:null;function t(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e} /*! * isobject
<https://github.com/jonschlinkert/isobject>
    * * Copyright (c) 2014-2017, Jon Schlinkert. * Released under the MIT License. */var r=function(e){return null!=e&&"object"==typeof e&&!1===Array.isArray(e)}; /*! * get-value
    <https://github.com/jonschlinkert/get-value>
        * * Copyright (c) 2014-2018, Jon Schlinkert. * Released under the MIT License. */const n=r;function o(e,t,r){return"function"==typeof r.join?r.join(e):e[0]+t+e[1]}function i(e,t,r){return"function"!=typeof r.isValid||r.isValid(e,t)}function s(e){return
        n(e)||Array.isArray(e)||"function"==typeof e}var a=t((function(e,t,r){if(n(r)||(r={default:r}),!s(e))return void 0!==r.default?r.default:e;"number"==typeof t&&(t=String(t));const a=Array.isArray(t),c="string"==typeof t,l=r.separator||".",u=r.joinChar||("string"==typeof
        l?l:".");if(!c&&!a)return e;if(c&&t in e)return i(t,e,r)?e[t]:r.default;let d=a?t:function(e,t,r){if("function"==typeof r.split)return r.split(e);return e.split(t)}(t,l,r),f=d.length,p=0;do{let t=d[p];for("number"==typeof t&&(t=String(t));t&&"\\"===t.slice(-1);)t=o([t.slice(0,-1),d[++p]||""],u,r);if(t
        in e){if(!i(t,e,r))return r.default;e=e[t]}else{let n=!1,s=p+1;for(;s
        <f;)if(t=o([t,d[s++]],u,r),n=t in e){if(!i(t,e,r))return r.default;e=e[t],p=s-1;break}if(!n)return r.default}}while(++p<f&&s(e));return p===f?e:r.default})),c=r; /*!
            * is-primitive <https://github.com/jonschlinkert/is-primitive>
            * * Copyright (c) 2014-present, Jon Schlinkert. * Released under the MIT License. */function l(e){return!0===c(e)&&"[object Object]"===Object.prototype.toString.call(e)} /*! * set-value
            <https://github.com/jonschlinkert/set-value>
                * * Copyright (c) Jon Schlinkert (https://github.com/jonschlinkert). * Released under the MIT License. */ const{deleteProperty:u}=Reflect,d=function(e){return"object"==typeof e?null===e:"function"!=typeof e},f=function(e){var t,r;return!1!==l(e)&&("function"==typeof(t=e.constructor)&&(!1!==l(r=t.prototype)&&!1!==r.hasOwnProperty("isPrototypeOf")))},p=e=>"object"==typeof
                e&&null!==e||"function"==typeof e,h=e=>{if(!d(e))throw new TypeError("Object keys must be strings or symbols");if((e=>"__proto__"===e||"constructor"===e||"prototype"===e)(e))throw new Error(`Cannot set unsafe key: "${e}"`)},m=(e,t,r)=>{const
                n=(e=>Array.isArray(e)?e.flat().map(String).join(","):e)(t?((e,t)=>{if("string"!=typeof e||!t)return e;let r=e+";";return void 0!==t.arrays&&(r+=`arrays=${t.arrays};`),void 0!==t.separator&&(r+=`separator=${t.separator};`),void 0!==t.split&&(r+=`split=${t.split};`),void
                0!==t.merge&&(r+=`merge=${t.merge};`),void 0!==t.preservePaths&&(r+=`preservePaths=${t.preservePaths};`),r})(e,t):e);h(n);const o=v.cache.get(n)||r();return v.cache.set(n,o),o},g=(e,t)=>t&&"function"==typeof t.split?t.split(e):"symbol"==typeof
                e?[e]:Array.isArray(e)?e:m(e,t,(()=>((e,t={})=>{const r=t.separator||".",n="/"!==r&&t.preservePaths;if("string"==typeof e&&!1!==n&&/\//.test(e))return[e];const o=[];let i="";const s=e=>{let t;""!==e.trim()&&Number.isInteger(t=Number(e))?o.push(t):o.push(e)};for(let
                t=0;t
                <e.length;t++){const n=e[t]; "\\"!==n?n!==r?i+=n:(s(i),i="" ):i+=e[++t]}return i&&s(i),o})(e,t))),y=(e,t,r,n)=>{if(h(t),void 0===r)u(e,t);else if(n&&n.merge){const o="function"===n.merge?n.merge:Object.assign;o&&f(e[t])&&f(r)?e[t]=o(e[t],r):e[t]=r}else e[t]=r;return e},v=(e,t,r,n)=>{if(!t||!p(e))return e;const o=g(t,n);let i=e;for(let e=0;e
                    <o.length;e++){const
                        t=o[e],s=o[e+1];if(h(t),void 0===s){y(i,t,r,n);break} "number"!=typeof s||Array.isArray(i[t])?(p(i[t])||(i[t]={}),i=i[t]):i=i[t]=[]}return e};v.split=g,v.cache=new Map,v.clear=()=>{v.cache=new Map};var w=t(v),b=console.log;let I=class{#e;#t;constructor(e){this.#e={},this.#t=e,this.get=(e,t)=>a(this.#e,e,t),this.set=(e,t,r)=>w(this.#e,e,t,r),this.print=b}};var _={USE_CONSTRUCTOR:"Please call it as constructor!"};function
                        T(e){if(this.constructor!==T)throw Error(_.USE_CONSTRUCTOR);this.context=e;const{engine:t,flow:r,caller:n}=e||{};this.run=e=>new Promise((async(e,t)=>{const n=r.get().global;r.set("$run.result.value",n),e()}))}T.TypeId="XBWt890aY0xNfOdKFHSyLI6V",T.ParentTypeId="Bprnrc09LgbhIICSAtkzxR2c";var
                        x=({key:e})=>{if(!e)throw new Error("key is required");window[e]=window[e]||{};const t=window[e];t.cmd=t.cmd||[];const r=t.cmd,n=r.push;r.push=function(e){"function"==typeof e&&e(),"function"==typeof n&&n.call(this,e)},function(){for(;r.length;){const
                        e=r.shift();"function"==typeof e&&e()}}()};function C(e){if(this.constructor!==C)throw Error(_.USE_CONSTRUCTOR);this.context=e;const{engine:t,flow:r,caller:n}=e||{};this.run=e=>new Promise((async(t,o)=>{try{const i=r.get(),s={},a={caller:n,resolve:t,reject:o,args:e,get
                        form(){return null==n?void 0:n.form},get module(){return s||(null==n?void 0:n.module)}},c=x,l={key:i.name};await c(l);return t({from:this,fromType:this.constructor,fromClosure:a,toType:T})}catch(e){o(e)}}))}C.TypeId="YUgOp46GRwNJXxAl4rrh4Hoa",C.ParentTypeId="Bprnrc09LgbhIICSAtkzxR2c";var
                        S=async({api:e,cmp:t})=>{!0===t.check&&await e.cmp.lookupIabConsent().catch((e=>{}))};function O(e){if(this.constructor!==O)throw Error(_.USE_CONSTRUCTOR);this.context=e;const{engine:t,flow:r,caller:n}=e||{};this.run=e=>new Promise((async(t,o)=>{try{const
                        i=r.get(),s={},a={caller:n,resolve:t,reject:o,args:e,get form(){return null==n?void 0:n.form},get module(){return s||(null==n?void 0:n.module)}},c=S,l={api:i.global,cmp:{check:!0}};await c(l);return t({from:this,fromType:this.constructor,fromClosure:a,toType:C})}catch(e){o(e)}}))}O.TypeId="rAwD-4CkvNrDhWUHE6vGkGUV",O.ParentTypeId="Bprnrc09LgbhIICSAtkzxR2c";var
                        R=async({service:e})=>async t=>{const r=e.newId();e.register({method:r,handler:function({name:n,args:o}){console.log("callbackHandler",n,o);const i=t[n];i&&(void 0!==o?i(o):i()),"adBreakDone"===n&&e.unregister({method:r})},configurable:!0}),e.proxy({method:"adBreak",args:{callbackId:r,type:t.type,name:t.name,meta:t.meta}}).catch((t=>{e.unregister({method:r}),console.error(t.message)}))};function
                        k(e){if(this.constructor!==k)throw Error(_.USE_CONSTRUCTOR);this.context=e;const{engine:t,flow:r,caller:n}=e||{};this.run=e=>new Promise((async(t,o)=>{try{const i=r.get(),s={},a={caller:n,resolve:t,reject:o,args:e,get form(){return
                        null==n?void 0:n.form},get module(){return s||(null==n?void 0:n.module)}},c=R,l={service:i.global.iservice},u=await c(l);return r.set("global.adBreak",u),t({from:this,fromType:this.constructor,fromClosure:a,toType:O})}catch(e){o(e)}}))}k.TypeId="Yatz_uGrYQR0ecLt6k7gyEOE",k.ParentTypeId="Bprnrc09LgbhIICSAtkzxR2c";var
                        E=async({service:e})=>async t=>{e.proxy({method:"firstUserAction",args:{}}).catch((e=>{console.error(e.message)}))};function P(e){if(this.constructor!==P)throw Error(_.USE_CONSTRUCTOR);this.context=e;const{engine:t,flow:r,caller:n}=e||{};this.run=e=>new
                        Promise((async(t,o)=>{try{const i=r.get(),s={},a={caller:n,resolve:t,reject:o,args:e,get form(){return null==n?void 0:n.form},get module(){return s||(null==n?void 0:n.module)}},c=E,l={service:i.global.iservice},u=await c(l);return
                        r.set("global.firstUserAction",u),t({from:this,fromType:this.constructor,fromClosure:a,toType:k})}catch(e){o(e)}}))}P.TypeId="m7mw6s81vTOLy3O0W5v-hqnx",P.ParentTypeId="Bprnrc09LgbhIICSAtkzxR2c";var A=async()=>{const e={},t={};function
                        r(){let t,r=window,n=null,o=null;for(;!t;){try{if("function"==typeof r.__tcfapi||"function"==typeof r.__cmp){"function"==typeof r.__tcfapi?(o=2,n=r.__tcfapi):(o=1,n=r.__cmp),t=r;break}}catch(e){}try{if(r.frames.__tcfapiLocator){o=2,t=r;break}}catch(e){}try{if(r.frames.__cmpLocator){o=1,t=r;break}}catch(e){}if(r===window.top)break;r=r.parent}return
                        e.version=o,e.frame=t,e.function=n,e.version}return{findCmp:r,findUsp:function(){let e,t,r=window;for(;!e;){try{if("function"==typeof r.__uspapi){t=r.__uspapi,e=r;break}}catch(e){}try{if(r.frames.__uspapiLocator){e=r;break}}catch(e){}if(r===window.top)break;r=r.parent}return{uspapiFrame:e,uspapiFunction:t}},lookupIabConsent:function(n={}){return
                        new Promise((o=>{function i(t,r){if(r){if(!1!==t.gdprApplies)return"tcloaded"===t.eventStatus||"useractioncomplete"===t.eventStatus?(function(t){const r=t&&"boolean"==typeof t.gdprApplies?t.gdprApplies:n.defaultGdprScope;("boolean"!=typeof
                        r||!0===r&&"string"!=typeof t.tcString)&&o({result:"cmpUnexpectedResponse",cmp:e,consentData:t})}(t),void o({result:"ok",consentData:t})):void 0;o({result:"ok",consentData:t})}else o({result:"cmpCallFailed"})}r(),e.frame?2===e.version?e.function?e.function("addEventListener",e.version,i):function(r,n,o){const
                        i="__tcfapi";function s(e){const r=`${i}Return`,n="string"==typeof e.data&&e.data.indexOf(r)>=0?JSON.parse(e.data):e.data;if(n[r]&&n[r].callId){const e=n[r];void 0!==t[e.callId]&&t[e.callId](e.returnValue,e.success)}}window[i]=(e,r,o,s)=>{const
                        a=Math.random()+"",c=`${i}Call`,l={[c]:{command:e,parameter:s,callId:a,version:r}};t[a]=o,n.postMessage(l,"*")},window.addEventListener("message",s,!1),window[i](r,e.version,o)}("addEventListener",e.frame,i):o({result:"cmpVersionNotV2",cmp:e}):o({result:"cmpNotFound"})}))}}};function
                        j(e){if(this.constructor!==j)throw Error(_.USE_CONSTRUCTOR);this.context=e;const{engine:t,flow:r,caller:n}=e||{};this.run=e=>new Promise((async(t,o)=>{try{r.get();const i={},s={caller:n,resolve:t,reject:o,args:e,get form(){return
                        null==n?void 0:n.form},get module(){return i||(null==n?void 0:n.module)}},a=A,c=await a();return r.set("global.cmp",c),t({from:this,fromType:this.constructor,fromClosure:s,toType:P})}catch(e){o(e)}}))}j.TypeId="q2HW9zuZyOPDuD03gIPH7s2R",j.ParentTypeId="Bprnrc09LgbhIICSAtkzxR2c";let
                        U=(e=21)=>{let t="",r=crypto.getRandomValues(new Uint8Array(e));for(;e--;)t+="useandom-26T198340PX75pxJACKVERYMINDBUSHWOLF_GQZbfghjklqvwyzrict"[63&r[e]];return t};var L=()=>({id:U()});function M(e){if(this.constructor!==M)throw
                        Error(_.USE_CONSTRUCTOR);this.context=e;const{engine:t,flow:r,caller:n}=e||{};this.run=e=>new Promise((async(t,o)=>{try{r.get();const i={},s={caller:n,resolve:t,reject:o,args:e,get form(){return null==n?void 0:n.form},get module(){return
                        i||(null==n?void 0:n.module)}},a=L,c=await a();return r.set("session",c),t({from:this,fromType:this.constructor,fromClosure:s,toType:j})}catch(e){o(e)}}))}M.TypeId="Li4H5HZ1vbp52yKTtzCsu5rn",M.ParentTypeId="Bprnrc09LgbhIICSAtkzxR2c";var
                        $={exports:{}};!function(e){var t=Object.prototype.hasOwnProperty,r="~";function n(){}function o(e,t,r){this.fn=e,this.context=t,this.once=r||!1}function i(e,t,n,i,s){if("function"!=typeof n)throw new TypeError("The listener must
                        be a function");var a=new o(n,i||e,s),c=r?r+t:t;return e._events[c]?e._events[c].fn?e._events[c]=[e._events[c],a]:e._events[c].push(a):(e._events[c]=a,e._eventsCount++),e}function s(e,t){0==--e._eventsCount?e._events=new n:delete
                        e._events[t]}function a(){this._events=new n,this._eventsCount=0}Object.create&&(n.prototype=Object.create(null),(new n).__proto__||(r=!1)),a.prototype.eventNames=function(){var e,n,o=[];if(0===this._eventsCount)return o;for(n
                        in e=this._events)t.call(e,n)&&o.push(r?n.slice(1):n);return Object.getOwnPropertySymbols?o.concat(Object.getOwnPropertySymbols(e)):o},a.prototype.listeners=function(e){var t=r?r+e:e,n=this._events[t];if(!n)return[];if(n.fn)return[n.fn];for(var
                        o=0,i=n.length,s=new Array(i);o
                        <i;o++)s[o]=n[o].fn;return s},a.prototype.listenerCount=function(e){var t=r?r+e:e,n=this._events[t];return n?n.fn?1:n.length:0},a.prototype.emit=function(e,t,n,o,i,s){var a=r?r+e:e;if(!this._events[a])return!1;var
                            c,l,u=this._events[a],d=arguments.length;if(u.fn){switch(u.once&&this.removeListener(e,u.fn,void 0,!0),d){case 1:return u.fn.call(u.context),!0;case 2:return u.fn.call(u.context,t),!0;case 3:return u.fn.call(u.context,t,n),!0;case
                            4:return u.fn.call(u.context,t,n,o),!0;case 5:return u.fn.call(u.context,t,n,o,i),!0;case 6:return u.fn.call(u.context,t,n,o,i,s),!0}for(l=1,c=new Array(d-1);l<d;l++)c[l-1]=arguments[l];u.fn.apply(u.context,c)}else{var f,p=u.length;for(l=0;l<p;l++)switch(u[l].once&&this.removeListener(e,u[l].fn,void
                            0,!0),d){case 1:u[l].fn.call(u[l].context);break;case 2:u[l].fn.call(u[l].context,t);break;case 3:u[l].fn.call(u[l].context,t,n);break;case 4:u[l].fn.call(u[l].context,t,n,o);break;default:if(!c)for(f=1,c=new Array(d-1);f<d;f++)c[f-1]=arguments[f];u[l].fn.apply(u[l].context,c)}}return!0},a.prototype.on=function(e,t,r){return
                            i(this,e,t,r,!1)},a.prototype.once=function(e,t,r){return i(this,e,t,r,!0)},a.prototype.removeListener=function(e,t,n,o){var i=r?r+e:e;if(!this._events[i])return this;if(!t)return s(this,i),this;var a=this._events[i];if(a.fn)a.fn!==t||o&&!a.once||n&&a.context!==n||s(this,i);else{for(var
                            c=0,l=[],u=a.length;c<u;c++)(a[c].fn!==t||o&&!a[c].once||n&&a[c].context!==n)&&l.push(a[c]);l.length?this._events[i]=1===l.length?l[0]:l:s(this,i)}return this},a.prototype.removeAllListeners=function(e){var t;return e?(t=r?r+e:e,this._events[t]&&s(this,t)):(this._events=new
                            n,this._eventsCount=0),this},a.prototype.off=a.prototype.removeListener,a.prototype.addListener=a.prototype.on,a.prefixed=r,a.EventEmitter=a,e.exports=a}($);var N=t($.exports);function z({window:e,serviceId:t}){return e&&t?t===this.serviceId?Promise.reject(new
                            Error( "Cannot connect to self")):new Promise(((t,r)=>{const n=U();this.transactionHandler[n]=e=>{const{sender:r,serviceId:n}=e.data;this.router=e.ports[0],this.router.onmessage=this.handleMessage.bind(this),this.router.serviceId=n,this.verbose&&console.log(`[IS] ${this.id}: Communication
                            channel established with ${r}`),e.data.elapsed=Date.now()-e.data.ts,t(e.data.body)};const o=this.createMessage({transactionId:n,method:"connect"});e.postMessage(o,"*"),this.setupTransactionTimeout({transactionId:n,reject:r})})):Promise.reject(new
                            Error("Target window and service ID are required to connect to a service"))}function q(){}function D(e){return e}function H({method:e,handler:t,configurable:r=!1}){if(this.api[e])throw new Error(`Cannot register method ${e}
                            as it is already registered.`);this.registeredHandlers[e]=t,Object.defineProperty(this.api,e,{get:()=>t,enumerable:!1,configurable:r}),this.verbose&&console.log(`[IS] ${this.id}: Registered handler for ${e}`)}function B({alias:e,method:t,service:r,configurable:n=!1}){this.api.register({method:e,handler:(e,n)=>this.api.proxy({method:t,service:r,args:e,options:n}),configurable:n}),this.verbose&&console.log(`[IS]
                            ${this.id}: Registered proxy for ${e} to ${r}`)}const F={services:{}};function V({method:e,args:t,service:r,options:n={}}){return new Promise(((o,i)=>{const s=U();this.transactionHandler[s]=e=>{e.data.elapsed=Date.now()-e.data.ts,o(e.data?.body)};const
                            a=(r||"").split("/"),c=a.shift(),l=this.clients[c];if(void 0===l){if(!this.router)return delete this.transactionHandler[s],i(new Error(`No router registered for ${this.id}`));n?.callback&&this.api.register({method:s,handler:n.callback,configurable:!0});const
                            o=this.createMessage({transactionId:s,method:e,hasCallback:!!n?.callback});t&&(o.body=t),r&&(o.service=r),this.router.postMessage(o),this.setupTransactionTimeout({transactionId:s,reject:i,timeout:n?.timeout})}else{const r=this.createMessage({transactionId:s,method:e,hasCallback:!!n?.callback});n?.callback&&this.api.register({method:s,handler:n.callback,configurable:!0}),t&&(r.body=t),a.length>0&&(r.service=a.join("/")),l.postMessage(r),this.setupTransactionTimeout({transactionId:s,reject:i,timeout:n?.timeout})}}))}function
                            K(){window.removeEventListener("message",this.handleMessage)}function X({window:e,timeout:t}){return new Promise(((r,n)=>{const o=U();this.transactionHandler[o]=e=>{r(e.data)};const i=this.createMessage({transactionId:o,method:"are-you-router"});e.postMessage(i,"*"),this.setupTransactionTimeout({transactionId:o,reject:n,timeout:t})}))}function
                            G(){const e=F.services,t=Object.keys(e),r=this.serviceId;for(let n=0;n
                            <t.length;n++){const o=e[t[n]];if(o.serviceId!==r&&o.router_enabled)return o}}async function Y({timeout:e=100}={}){const t=G.call(this);if(t)return{window:window,serviceId:t.serviceId,contextId:t.contextId,scriptId:t.scriptId};let
                                r=window.parent;for(;r!==window;){const t=await X.call(this,{window:r,timeout:e}).catch((e=>{this.verbose&&console.log(`[IS] ${this.id}: ${e.message}`)}));if(t)return{window:r,serviceId:t.serviceId,contextId:t.contextId,scriptId:t.scriptId};r=r.parent}this.verbose&&console.log(`[IS] ${this.id}: No router found`)}function
                                J({method:e}){this.api[e]&&(delete this.api[e],delete this.registeredHandlers[e],this.verbose&&console.log(`[IS] ${this.id}: Unregistered handler for ${e}`))}function Z(){return U()}async function Q(e){const{transactionId:t,messageId:r,serviceId:n,method:o,sender:i}=e.data;if(!(t||r||o||n))return;if(this.serviceId===n)return;const
                                s=new MessageChannel;this.clients[i]=s.port1,this.clients[i].onmessage=this.handleMessage.bind(this),this.clients[i].serviceId=n;const a=this.createMessage({transactionId:t,replyTo:r});e.source.postMessage(a,"*",[s.port2]),this.verbose&&console.log(`[IS]
                                ${this.id}: Connection received from ${i}`);try{this.ee.emit("connected",{contextId:e.data.contextId,scriptId:e.data.scriptId,serviceId:n,service:i})}catch(e){this.verbose&&console.log(`[IS] ${this.id}: Error while emitting
                                connected event`,e.message)}}async function W(e){const{transactionId:t,messageId:r,serviceId:n}=e.data;if(!0!==this.router_enabled)return;if(this.serviceId===n)return;const o=this.createMessage({transactionId:t,replyTo:r});e.source.postMessage(o,"*")}async
                                function ee(e){const{transactionId:t,messageId:r,method:n,service:o}=e.data,i=await this.api.proxy({method:n,args:e.data.body,service:o}),s=this.createMessage({transactionId:t,replyTo:r});s.body=i,console.log(e),e.target.postMessage(s)}async
                                function te(e){const{transactionId:t,messageId:r,method:n}=e.data,o=this.registeredHandlers[n],i=await o(e.data.body,e.data),s=this.createMessage({transactionId:t,replyTo:r});s.body=i,e.target.postMessage(s)}async function
                                re(e){const{transactionId:t}=e.data,r=this.transactionHandler[t];delete this.transactionHandler[t],await r(e)}async function ne(e){const{transactionId:t,messageId:r,serviceId:n,method:o,service:i}=e.data;if(t||r||o||n){switch(o){case"connect":await
                                Q.call(this,e);break;case"are-you-router":await W.call(this,e);break;default:i?await ee.call(this,e):this.registeredHandlers[o]?await te.call(this,e):this.transactionHandler[t]&&await re.call(this,e)}this.verbose&&console.log(`[IS]
                                ${this.id}`,e.data)}}function oe({transactionId:e,reject:t,timeout:r=1e3}){const n=setTimeout((()=>{clearTimeout(n),delete this.transactionHandler[e],this.api.unregister({method:e}),t(new Error("timeout"))}),r)}async function
                                ie(){const t="INTERSERVICE_CONTEXT_ID";window[t]||Object.defineProperty(window,t,{value:U(),enumerable:!1,configurable:!1}),this.contextId=window[t],this.scriptId=await async function(e){if(!e)return null;const t=(new TextEncoder).encode(e),r=await
                                crypto.subtle.digest("SHA-1",t);return Array.from(new Uint8Array(r)).map((e=>e.toString(16).padStart(2,"0"))).join("")}(e&&e.src||new URL("index.js",document.baseURI).href)}function se(e){return{ts:Date.now(),contextId:this.contextId,scriptId:this.scriptId,serviceId:this.serviceId,messageId:U(),sender:this.id,...e}}async
                                function ae({id:e,verbose:t,router:r}){const n={api:{}};function o(e,t){Object.defineProperty(n.api,e,{get:()=>t,enumerable:!1,configurable:!1})}function i(e,t){const r=t.bind(n);n.api.register({method:e,handler:r})}return
                                await async function(){if(!/^([a-z\-_]+)$/.test(e))throw new Error("Invalid ID format. ID should be lowercase and can include '-' and '_'.");this.router_enabled=r,this.serviceId=U(),this.id=e,this.verbose=t,this.ee=new
                                N,this.router=null,this.clients={},this.transactionHandler={},this.registeredHandlers={},this.setupTransactionTimeout=oe.bind(this),this.handleMessage=ne.bind(this),this.createMessage=se.bind(this),await ie.apply(this),window.addEventListener("message",this.handleMessage),F.services[this.id]=this}.apply(n),o("connect",z.bind(n)),o("findRouter",Y.bind(n)),o("register",H.bind(n)),o("unregister",J.bind(n)),o("registerProxy",B.bind(n)),o("proxy",V.bind(n)),o("dispose",K.bind(n)),o("newId",Z.bind(n)),o("on",n.ee.on.bind(n.ee)),o("once",n.ee.once.bind(n.ee)),o("off",n.ee.off.bind(n.ee)),o("addListener",n.ee.addListener.bind(n.ee)),o("removeListener",n.ee.removeListener.bind(n.ee)),o("removeAllListeners",n.ee.removeAllListeners.bind(n.ee)),i("ping",q),i("echo",D),n.api}var
                                ce=async({query:e})=>{const t=e.is_id||"locus",r="true"===e.is_verbose,n=await ae({id:t,verbose:r,router:!0}),o=await n.findRouter();return o&&(await n.connect(o),n.registerProxy({alias:"callxyzt",method:"xyzt"}),n.register({method:"beforeAd",handler:e=>{console.log("beforeAd
                                method is called with params",e)}}),console.log("connected to router",o)),n.on("connected",(e=>{console.log("connected event on locus",e)})),n};function le(e){if(this.constructor!==le)throw Error(_.USE_CONSTRUCTOR);this.context=e;const{engine:t,flow:r,caller:n}=e||{};this.run=e=>new
                                Promise((async(t,o)=>{try{const i=r.get(),s={},a={caller:n,resolve:t,reject:o,args:e,get form(){return null==n?void 0:n.form},get module(){return s||(null==n?void 0:n.module)}},c=ce,l={query:i.query},u=await c(l);return
                                r.set("global.iservice",u),t({from:this,fromType:this.constructor,fromClosure:a,toType:M})}catch(e){o(e)}}))}function ue(e){if(this.constructor!==ue)throw Error(_.USE_CONSTRUCTOR);this.context=e;const{engine:t,flow:r,caller:n}=e||{};this.run=e=>new
                                Promise((async(o,i)=>{const s={caller:n,args:e,get form(){return null==n?void 0:n.form},get module(){return null==n?void 0:n.module}};let a=new le({engine:t,flow:r,parent:this,caller:s});for(;;){const e=await a.run();if(!e)break;if(e.toType.ParentTypeId!==this.constructor.TypeId)return
                                o(e);a=new e.toType({engine:t,flow:r,parent:this,caller:s})}o()}))}le.TypeId="KpXflhgTCrmHl6Me6SE9j4YX",le.ParentTypeId="7_VTcKL1dR91G8KSbC9_h1Q8",ue.TypeId="7_VTcKL1dR91G8KSbC9_h1Q8",ue.ParentTypeId="Bprnrc09LgbhIICSAtkzxR2c";var
                                de={exports:{}},fe={exports:{}};!function(e,t){function r(e){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof
                                e},r(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){if(!("string"==typeof e||e instanceof String)){var t=r(e);throw null===e?t="null":"object"===t&&(t=e.constructor.name),new TypeError("Expected
                                a string but received a ".concat(t))}},e.exports=t.default,e.exports.default=t.default}(fe,fe.exports);var pe,he,me=fe.exports,ge={exports:{}},ye={exports:{}};pe=ye,he=ye.exports,Object.defineProperty(he,"__esModule",{value:!0}),he.default=function(){var
                                e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;for(var r in t)void 0===e[r]&&(e[r]=t[r]);return e},pe.exports=he.default,pe.exports.default=he.default;var ve=ye.exports;!function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){(0,r.default)(e),(t=(0,n.default)(t,i)).allow_trailing_dot&&"."===e[e.length-1]&&(e=e.substring(0,e.length-1));!0===t.allow_wildcard&&0===e.indexOf("*.")&&(e=e.substring(2));var
                                o=e.split("."),s=o[o.length-1];if(t.require_tld){if(o.length
                                <2)return!1;if(!t.allow_numeric_tld&&!/^([a-z\u00A1-\u00A8\u00AA-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]{2,}|xn[a-z0-9-]{2,})$/i.test(s))return!1;if(/\s/.test(s))return!1}if(!t.allow_numeric_tld&&/^\d+$/.test(s))return!1;return
                                    o.every((function(e){return!(e.length>63&&!t.ignore_max_length)&&(!!/^[a-z_\u00a1-\uffff0-9-]+$/i.test(e)&&(!/[\uff01-\uff5e]/.test(e)&&(!/^-|-$/.test(e)&&!(!t.allow_underscores&&/_/.test(e)))))}))};var r=o(me),n=o(ve);function o(e){return e&&e.__esModule?e:{default:e}}var
                                    i={require_tld:!0,allow_underscores:!1,allow_trailing_dot:!1,allow_numeric_tld:!1,allow_wildcard:!1,ignore_max_length:!1};e.exports=t.default,e.exports.default=t.default}(ge,ge.exports);var we=ge.exports,be=t(we),Ie={exports:{}};!function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=function
                                    e(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";if((0,n.default)(t),!(r=String(r)))return e(t,4)||e(t,6);if("4"===r)return s.test(t);if("6"===r)return c.test(t);return!1};var r,n=(r=me)&&r.__esModule?r:{default:r};var
                                    o="(?:[0-9]|[1-9][0-9]|1[0-9][0-9]|2[0-4][0-9]|25[0-5])",i="(".concat(o,"[.]){3}").concat(o),s=new RegExp("^".concat(i,"$")),a="(?:[0-9a-fA-F]{1,4})",c=new RegExp("^("+"(?:".concat(a,":){7}(?:").concat(a,"|:)|")+"(?:".concat(a,":){6}(?:").concat(i,"|:").concat(a,"|:)|")+"(?:".concat(a,":){5}(?::").concat(i,"|(:").concat(a,"){1,2}|:)|")+"(?:".concat(a,":){4}(?:(:").concat(a,"){0,1}:").concat(i,"|(:").concat(a,"){1,3}|:)|")+"(?:".concat(a,":){3}(?:(:").concat(a,"){0,2}:").concat(i,"|(:").concat(a,"){1,4}|:)|")+"(?:".concat(a,":){2}(?:(:").concat(a,"){0,3}:").concat(i,"|(:").concat(a,"){1,5}|:)|")+"(?:".concat(a,":){1}(?:(:").concat(a,"){0,4}:").concat(i,"|(:").concat(a,"){1,6}|:)|")+"(?::((?::".concat(a,"){0,5}:").concat(i,"|(?::").concat(a,"){1,7}|:))")+")(%[0-9a-zA-Z-.:]{1,})?$");e.exports=t.default,e.exports.default=t.default}(Ie,Ie.exports);var
                                    _e=Ie.exports;!function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){if((0,r.default)(e),!e||/[\s
                                    <>]/.test(e))return!1;if(0===e.indexOf("mailto:"))return!1;if((t=(0,i.default)(t,c)).validate_length&&e.length>=2083)return!1;if(!t.allow_fragments&&e.includes("#"))return!1;if(!t.allow_query_components&&(e.includes("?")||e.includes("&")))return!1;var
                                        s,d,f,p,h,m,g,y;if(g=e.split("#"),e=g.shift(),g=e.split("?"),e=g.shift(),g=e.split("://"),g.length>1){if(s=g.shift().toLowerCase(),t.require_valid_protocol&&-1===t.protocols.indexOf(s))return!1}else{if(t.require_protocol)return!1;if("//"===e.slice(0,2)){if(!t.allow_protocol_relative_urls)return!1;g[0]=e.slice(2)}}if(e=g.join("://"),""===e)return!1;if(g=e.split("/"),e=g.shift(),""===e&&!t.require_host)return!0;if(g=e.split("@"),g.length>1){if(t.disallow_auth)return!1;if(""===g[0])return!1;if((d=g.shift()).indexOf(":")>=0&&d.split(":").length>2)return!1;var
                                        v=d.split(":"),w=(T=2,function(e){if(Array.isArray(e))return e}(_=v)||function(e,t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e)){var r=[],n=!0,o=!1,i=void 0;try{for(var s,a=e[Symbol.iterator]();!(n=(s=a.next()).done)&&(r.push(s.value),!t||r.length!==t);n=!0);}catch(e){o=!0,i=e}finally{try{n||null==a.return||a.return()}finally{if(o)throw
                                        i}}return r}}(_,T)||function(e,t){if(e){if("string"==typeof e)return a(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?a(e,t):void
                                        0}}(_,T)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),b=w[0],I=w[1];if(""===b&&""===I)return!1}var
                                        _,T;p=g.join("@"),m=null,y=null;var x=p.match(l);x?(f="",y=x[1],m=x[2]||null):(f=(g=p.split(":")).shift(),g.length&&(m=g.join(":")));if(null!==m&&m.length>0){if(h=parseInt(m,10),!/^[0-9]+$/.test(m)||h
                                        <=0||h>65535)return!1}else if(t.require_port)return!1;if(t.host_whitelist)return u(f,t.host_whitelist);if(""===f&&!t.require_host)return!0;if(!((0,o.default)(f)||(0,n.default)(f,t)||y&&(0,o.default)(y,6)))return!1;if(f=f||y,t.host_blacklist&&u(f,t.host_blacklist))return!1;return!0};var
                                            r=s(me),n=s(we),o=s(_e),i=s(ve);function s(e){return e&&e.__esModule?e:{default:e}}function a(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r
                                            <t;r++)n[r]=e[r];return n}var c={protocols:[
                                                "http", "https", "ftp"],require_tld:!0,require_protocol:!1,require_host:!0,require_port:!1,require_valid_protocol:!0,allow_underscores:!1,allow_trailing_dot:!1,allow_protocol_relative_urls:!1,allow_fragments:!0,allow_query_components:!0,validate_length:!0},l=/^\[([^\]]+)\](?::([0-9]+))?$/;function
                                                u(e,t){for(var r=0;r<t.length;r++){var n=t[r];if(e===n||(o=n, "[object RegExp]"===Object.prototype.toString.call(o)&&n.test(e)))return!0}var o;return!1}e.exports=t.default,e.exports.default=t.default}(de,de.exports);var
                                                Te=t(de.exports);function xe(e){const t={},r=(null==e?void 0:e._ancestor_origins)||window.location.ancestorOrigins,n=(null==e?void 0:e.self_url)||window.location.href,o=(null==e?void 0:e.self_origin)||window.location.origin,i=(null==e?void
                                                0:e.referrer_url)||document.referrer,s=(null==e?void 0:e.partner_url_key)|| "gd_sdk_referrer_url";function a(e,r){return w(t,e,r)}function c(e){if(e&& ""!==e)try{return new URL(e)}catch(e){}}function l(){const
                                                t=(null==e?void 0:e.urls)||[n,i];for(let e=0;e<t.length;e++){const r=c(t[e]);if(!r)continue;let n=r.searchParams.get(s);if(n&&(n=decodeURIComponent(n),Te(n)))return n}}return t.referer=i,t.url=n,t.title=document.title,t.canonical=function(){const
                                                e=document.querySelector( 'link[rel="canonical"]');return e?e.getAttribute( "href"):null}(),function(){var e=0,t=window;try{for(;t!=t.parent;)e++,t=t.parent}catch(e){a( "depth.error",e.message)}a(
                                                "depth.value",e)}(),function(){const e=r,n=t.depth.value;let s=o;if(a( "top.domain.from", "fallback"),e&&e.length>0)s=e[e.length-1],a("top.domain.from","origins");else if(0===n)s=o,a("top.domain.from","self-top");else if(1===n){const e=c(i);e&&(s=e.origin,a("top.domain.from","referrer"))}a("top.domain.value",s.replace(/^https?:\/\/(www\.)?(.*)$/i,"$2"))}(),function(){const
                                                e=l();if(e)if(be(e,{allow_wildcard:!0}))a("partner.domain.value",e),a("partner.domain.from","partner-domain");else{const r=c(e);r?(a("partner.domain.value",r.origin.replace(/^https?:\/\/(www\.)?(.*)$/i,"$2")),a("partner.domain.from","partner-url")):(a("partner.domain.value",t.top.domain.value),a("partner.domain.from","partner-fallback"))}else
                                                a("partner.domain.value",t.top.domain.value),a("partner.domain.from","fallback")}(),function(){const e=l();0===t.depth.value?(a("partner.url.value",n),a("partner.url.from","self-top")):e?be(e,{allow_wildcard:!0})?(a("partner.url.value",n),a("partner.url.from","partner-domain")):(a("partner.url.value",e),a("partner.url.from","partner-url")):(a("partner.url.value",i),a("partner.url.from","fallback"))}(),t}var
                                                Ce=()=>xe();function Se(e){if(this.constructor!==Se)throw Error(_.USE_CONSTRUCTOR);this.context=e;const{engine:t,flow:r,caller:n}=e||{};this.run=e=>new Promise((async(t,o)=>{try{r.get();const i={},s={caller:n,resolve:t,reject:o,args:e,get
                                                form(){return null==n?void 0:n.form},get module(){return i||(null==n?void 0:n.module)}},a=Ce,c=await a();return r.set("location",c),t({from:this,fromType:this.constructor,fromClosure:s,toType:ue})}catch(e){o(e)}}))}Se.TypeId="zyhYciCateLkpXzGxXqIl1V6",Se.ParentTypeId="Bprnrc09LgbhIICSAtkzxR2c";var
                                                Oe=()=>new Promise(((e,t)=>{if("loading"===document.readyState){const t=()=>{document.removeEventListener("DOMContentLoaded",t),e()};document.addEventListener("DOMContentLoaded",t)}else"interactive"!==document.readyState&&"complete"!==document.readyState||e()}));function
                                                Re(e){if(this.constructor!==Re)throw Error(_.USE_CONSTRUCTOR);this.context=e;const{engine:t,flow:r,caller:n}=e||{};this.run=e=>new Promise((async(t,o)=>{try{r.get();const i={},s={caller:n,resolve:t,reject:o,args:e,get
                                                form(){return null==n?void 0:n.form},get module(){return i||(null==n?void 0:n.module)}},a=Oe;await a();return t({from:this,fromType:this.constructor,fromClosure:s,toType:Se})}catch(e){o(e)}}))}Re.TypeId="vR9Fruume623aVxyo_3Kbhjx",Re.ParentTypeId="Bprnrc09LgbhIICSAtkzxR2c";var
                                                ke=async({hash:e})=>{if(!(e=e.substring(1)))return{};for(var t=e.split("&"),r={},n=0;n
                                                <t.length;n++){var o=t[n];if(o){var i=o.split( "=");2===i.length?r[decodeURIComponent(i[0])]=decodeURIComponent(i[1]):r[decodeURIComponent(i[0])]=void
                                                    0}}return r};function Ee(e){if(this.constructor!==Ee)throw Error(_.USE_CONSTRUCTOR);this.context=e;const{engine:t,flow:r,caller:n}=e||{};this.run=e=>new Promise((async(t,o)=>{try{r.get();const i={},s={caller:n,resolve:t,reject:o,args:e,get form(){return null==n?void 0:n.form},get module(){return i||(null==n?void 0:n.module)}},a=ke,c={hash:window.location.hash},l=await
                                                    a(c);return r.set("query",l),t({from:this,fromType:this.constructor,fromClosure:s,toType:Re})}catch(e){o(e)}}))}Ee.TypeId="JzOuw71DfR0Y6w_cuXOgyQrT",Ee.ParentTypeId="Bprnrc09LgbhIICSAtkzxR2c";var Pe=({key:e})=>{if(!e)throw
                                                    new Error("key is required");window[e]=window[e]||{};return window[e]};function Ae(e){if(this.constructor!==Ae)throw Error(_.USE_CONSTRUCTOR);this.context=e;const{engine:t,flow:r,caller:n}=e||{};this.run=e=>new
                                                    Promise((async(t,o)=>{try{const i=r.get(),s={},a={caller:n,resolve:t,reject:o,args:e,get form(){return null==n?void 0:n.form},get module(){return s||(null==n?void 0:n.module)}},c=Pe,l={key:i.name},u=await
                                                    c(l);return r.set("global",u),t({from:this,fromType:this.constructor,fromClosure:a,toType:Ee})}catch(e){o(e)}}))}function je(e){if(this.constructor!==je)throw Error(_.USE_CONSTRUCTOR);this.context=e;const{engine:t,flow:r,caller:n}=e||{};this.run=e=>new
                                                    Promise((async(e,t)=>{const n=r.get(),o=window[n.name];r.set("$run.result.value",o),e()}))}function Ue(e){if(this.constructor!==Ue)throw Error(_.USE_CONSTRUCTOR);this.context=e;const{engine:t,flow:r,caller:n}=e||{};this.run=e=>new
                                                    Promise((async(t,o)=>{r.get();const i={caller:n,args:e,get form(){return null==n?void 0:n.form},get module(){return null==n?void 0:n.module}};return t({from:this,fromType:this.constructor,fromClosure:i,toType:je})}))}function
                                                    Le(e){if(this.constructor!==Le)throw Error(_.USE_CONSTRUCTOR);this.context=e;const{engine:t,flow:r,caller:n}=e||{};this.run=e=>new Promise((async(o,i)=>{var s;const a=r.get(),c={caller:n,args:e,get form(){return
                                                    null==n?void 0:n.form},get module(){return null==n?void 0:n.module}};if("function"==typeof(null===(s=window[a.name])||void 0===s||null===(s=s.cmp)||void 0===s?void 0:s.findCmp)){const e=new Ue({engine:t,flow:r,parent:this,caller:c}),n=await
                                                    e.run();return n?o(n):o()}return o({from:this,fromType:this.constructor,fromClosure:c,toType:Ae})}))}function Me(e){if(this.constructor!==Me)throw Error(_.USE_CONSTRUCTOR);this.context=e;const{engine:t,flow:r,caller:n}=e||{};this.run=e=>new
                                                    Promise((async(t,o)=>{r.get();const i={caller:n,args:e,get form(){return null==n?void 0:n.form},get module(){return null==n?void 0:n.module}};return r.set("name","gdlocus"),t({from:this,fromType:this.constructor,fromClosure:i,toType:Le})}))}Ae.TypeId="KJ-wC1uZ6NIK_RMJPixvGDm_",Ae.ParentTypeId="Bprnrc09LgbhIICSAtkzxR2c",je.TypeId="4SVeEN7IyQdRi95kXpOVCAtT",je.ParentTypeId="Bprnrc09LgbhIICSAtkzxR2c",Ue.TypeId="6Bme0IC1e2vOnJhOO1qGxakM",Ue.ParentTypeId="fIKePAvZPjYmRqIfgExnLDXv",Le.TypeId="fIKePAvZPjYmRqIfgExnLDXv",Le.ParentTypeId="Bprnrc09LgbhIICSAtkzxR2c",Me.TypeId="fxix8geWmezl0MSPueo_YLzR",Me.ParentTypeId="Bprnrc09LgbhIICSAtkzxR2c";class
                                                    $e extends I{#r;constructor(e){super(e),this.engine=e.engine}async init(e){}waitForNext(e){this.#r=e}async continueForNext(e){var t;const r=null===(t=this.#r)||void 0===t?void 0:t.next;this.#r=void 0,r&&await
                                                    r()}async run(e){await this.init(e);const t={};let r=new Me({parent:this,flow:this,engine:this.engine,caller:t});for(;;){const e=await r.run();if(!e)break;if(e.toType.ParentTypeId!==this.constructor.TypeId)throw
                                                    new Error("Unknown situation");r=new e.toType({parent:this,flow:this,engine:this.engine,caller:t})}return this.get("$run")}}$e.TypeId="Bprnrc09LgbhIICSAtkzxR2c";(new class extends I{#n;constructor(e){super(e),this.#n=new
                                                    $e({engine:this})}async init(e){}async run(e){var t;console.log((new Date).toLocaleString(),"locus"),await this.init({params:e});const r=await this.#n.run({params:e});return null==r||null===(t=r.result)||void
                                                    0===t?void 0:t.value}async destroy(){}}).run().catch((e=>{console.log(e.message)}))}();